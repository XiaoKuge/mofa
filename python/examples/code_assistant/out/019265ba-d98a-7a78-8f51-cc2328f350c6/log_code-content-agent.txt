2024-10-07 14:46:58,999 - 124891960600384 - predict.py-predict:17 - WARNING: 	*** In DSPy 2.5, all LM clients except `dspy.LM` are deprecated. ***
 		You are using the client SiliconFlowClient, which will be removed in DSPy 2.6.
 		Changing the client is straightforward and will let you use new features (Adapters) that improve the consistency of LM outputs, especially when using chat LMs. 

 		Learn more about the changes and how to migrate at
 		https://github.com/stanfordnlp/dspy/blob/main/examples/migration.ipynb
Traceback (most recent call last):
  File "/home/sunny/mofa/python/mofa/run/run_agent.py", line 159, in run_dspy_or_crewai_agent
    result = run_dspy_agent(agent_config=agent_config)
  File "/home/sunny/mofa/python/mofa/run/run_agent.py", line 127, in run_dspy_agent
    answer = reasoner.forward(question=agent_config.get('task'), kwargs=agent_config.get('input_fields', {}))
  File "/home/sunny/mofa/python/mofa/agent_build/base/module.py", line 64, in forward
    predict = self.predict(question=question,**variable_dict,**self.no_cache)
  File "/home/sunny/anaconda3/envs/mofa/lib/python3.10/site-packages/dspy/predict/predict.py", line 99, in __call__
    return self.forward(**kwargs)
  File "/home/sunny/anaconda3/envs/mofa/lib/python3.10/site-packages/dspy/predict/predict.py", line 144, in forward
    completions = old_generate(demos, signature, kwargs, config, self.lm, self.stage)
  File "/home/sunny/anaconda3/envs/mofa/lib/python3.10/site-packages/dspy/predict/predict.py", line 171, in old_generate
    x, C = dsp.generate(template, **config)(x, stage=stage)
  File "/home/sunny/anaconda3/envs/mofa/lib/python3.10/site-packages/dsp/primitives/predict.py", line 72, in do_generate
    prompt = template(example)
  File "/home/sunny/anaconda3/envs/mofa/lib/python3.10/site-packages/dsp/adapters/template.py", line 183, in __call__
    query = self.query(example)
  File "/home/sunny/anaconda3/envs/mofa/lib/python3.10/site-packages/dsp/adapters/template.py", line 44, in query
    formatted_value = format_handler(example[field.input_variable])
  File "/home/sunny/anaconda3/envs/mofa/lib/python3.10/site-packages/dsp/adapters/template.py", line 41, in format_handler
    assert type(x) == str, f"Need format_handler for {field.input_variable} of type {type(x)}"
AssertionError: Need format_handler for question of type <class 'dict'>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/sunny/mofa/python/examples/code_assistant/scripts/content.py", line 83, in <module>
    main()
  File "/home/sunny/mofa/python/examples/code_assistant/scripts/content.py", line 68, in main
    agent_result = run_dspy_or_crewai_agent(agent_config=inputs)
  File "/home/sunny/mofa/python/mofa/run/run_agent.py", line 165, in run_dspy_or_crewai_agent
    raise RuntimeError(str(e))
RuntimeError: Need format_handler for question of type <class 'dict'>
sagemaker.config INFO - Not applying SDK defaults from location: /etc/xdg/xdg-ubuntu-xorg/sagemaker/config.yaml
sagemaker.config INFO - Not applying SDK defaults from location: /home/sunny/.config/sagemaker/config.yaml
Need format_handler for question of type <class 'dict'>
